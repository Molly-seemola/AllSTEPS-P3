<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Make product enquiries at AllStepz. Ask about shoe sizing, availability, and pricing for your favorite branded shoes." />
    <meta name="keywords" content="product enquiry, shoe sizing, availability, AllStepz questions" />
    <title>Enquiry - AllStepz</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>AllStepz</h1>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="products.html">Products</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="enquiry.html" class="active">Enquire</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="cart.html">Cart ðŸ›’ <span id="cart-count">0</span></a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <div class="container page-container">
            <h2>Product Enquiry</h2>
            <p>Interested in a product but have a question? Need help with sizing? Complete the form below and our team will get back to you as soon as possible.</p>

            <form id="enquiry_form" class="enquiry-form">
                <div class="form-group">
                    <label for="name">Full Name: *</label>
                    <input type="text" id="name" name="name" placeholder="Enter your full name" required>
                </div>

                <div class="form-group">
                    <label for="email">Email Address: *</label>
                    <input type="email" id="email" name="email" placeholder="Enter your email address" required>
                </div>

                <div class="form-group">
                    <label for="product">Product of Interest: *</label>
                    <select id="product" name="product" required>
                        <option value="">-- Please Select a Product --</option>
                        <option value="nike_airmax">Nike Air Max Pulse</option>
                        <option value="adidas_ultraboost">Adidas Ultraboost 5.0</option>
                        <option value="converse_chuck">Converse Chuck Taylor</option>
                        <option value="nike_airmax_plus">Nike Air Max Plus</option>
                        <option value="puma_rsx">Puma RS-X Trail</option>
                        <option value="new_balance_550">New Balance 550</option>
                        <option value="jordan_1">Air Jordan 1 Retro High</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="message">Your Message: *</label>
                    <textarea id="message" name="message" rows="5" placeholder="Tell us about your enquiry, questions about sizing, availability, etc." required></textarea>
                </div>

                <button type="submit" class="btn">Submit Enquiry</button>
            </form>
        </div>
    </main>

    <footer>
        <p>&copy; <span id="footer-year">2025</span> AllStepz | Affordable Branded Shoes</p>
        <p>Last updated: <span id="last-updated"></span></p>
        <div class="social-icons">
            <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
            <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
        </div>
    </footer>

    <script>
    // Update cart count
    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      document.getElementById('cart-count').textContent = cart.length;
    }
    
    // Show popup notification
    function showPopup(type, title, message) {
      let popupOverlay = document.getElementById('popupOverlay');
      
      if (!popupOverlay) {
        popupOverlay = document.createElement('div');
        popupOverlay.id = 'popupOverlay';
        popupOverlay.className = 'popup-overlay';
        document.body.appendChild(popupOverlay);
        
        popupOverlay.addEventListener('click', function(e) {
          if (e.target === popupOverlay) {
            closePopup();
          }
        });
        
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape' && popupOverlay.classList.contains('active')) {
            closePopup();
          }
        });
      }
      
      popupOverlay.innerHTML = `
        <div class="popup-content">
          <div class="popup-icon ${type}">
            <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
          </div>
          <h3 class="popup-title">${title}</h3>
          <p class="popup-message">${message}</p>
          <button class="popup-button" onclick="closePopup()">OK</button>
        </div>
      `;
      
      setTimeout(() => {
        popupOverlay.classList.add('active');
      }, 10);
    }
    
    window.closePopup = function() {
      const popupOverlay = document.getElementById('popupOverlay');
      if (popupOverlay) {
        popupOverlay.classList.remove('active');
        setTimeout(() => {
          if (popupOverlay.parentNode) {
            popupOverlay.parentNode.removeChild(popupOverlay);
          }
        }, 300);
      }
    };
    
    // Show error message
    function showError(input, message) {
      const formGroup = input.parentElement;
      const existingError = formGroup.querySelector('.error-message');
      
      if (existingError) {
        existingError.remove();
      }
      
      const errorDiv = document.createElement('div');
      errorDiv.className = 'error-message';
      errorDiv.textContent = message;
      formGroup.appendChild(errorDiv);
      
      input.style.borderColor = '#e74c3c';
      input.style.backgroundColor = '#fdf2f2';
    }
    
    // Clear errors
    function clearErrors(formId) {
      const form = document.getElementById(formId);
      if (!form) return;
      
      const errorMessages = form.querySelectorAll('.error-message');
      errorMessages.forEach(error => error.remove());
      
      const inputs = form.querySelectorAll('input, select, textarea');
      inputs.forEach(input => {
        input.style.borderColor = '#e0e0e0';
        input.style.backgroundColor = '#fafafa';
      });
    }
    
    // Validate email
    function isValidEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }
    
    // Real-time validation
    function setupRealTimeValidation() {
      const inputs = document.querySelectorAll('#enquiry_form input, #enquiry_form select, #enquiry_form textarea');
      
      inputs.forEach(input => {
        input.addEventListener('blur', function() {
          if (this.value.trim() || this.tagName === 'SELECT') {
            validateField(this);
          }
        });
        
        if (input.type !== 'select-one') {
          input.addEventListener('input', function() {
            const formGroup = this.parentElement;
            const errorMessage = formGroup.querySelector('.error-message');
            
            if (errorMessage && this.value.trim()) {
              errorMessage.remove();
              this.style.borderColor = '#e0e0e0';
              this.style.backgroundColor = '#fafafa';
            }
          });
        }
      });
    }
    
    function validateField(field) {
      const formGroup = field.parentElement;
      const errorMessage = formGroup.querySelector('.error-message');
      
      if (errorMessage) {
        errorMessage.remove();
      }
      
      let isValid = true;
      let message = '';
      
      if (field.id === 'name') {
        if (field.value.trim().length < 2) {
          message = 'Name must be at least 2 characters long';
          isValid = false;
        }
      } else if (field.id === 'email') {
        if (!isValidEmail(field.value)) {
          message = 'Please enter a valid email address';
          isValid = false;
        }
      } else if (field.id === 'product') {
        if (!field.value) {
          message = 'Please select a product';
          isValid = false;
        }
      } else if (field.id === 'message') {
        if (field.value.trim().length < 10) {
          message = 'Message must be at least 10 characters long';
          isValid = false;
        }
      }
      
      if (!isValid) {
        showError(field, message);
      } else {
        field.style.borderColor = '#27ae60';
        field.style.backgroundColor = '#f0f9f0';
      }
    }
    
    // Enquiry form submission
    const enquiryForm = document.getElementById('enquiry_form');
    
    enquiryForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const name = document.getElementById('name');
      const email = document.getElementById('email');
      const product = document.getElementById('product');
      const message = document.getElementById('message');
      
      let isValid = true;
      let errorFields = [];
      
      clearErrors('enquiry_form');
      
      if (!name.value.trim()) {
        showError(name, 'Please fill in your full name');
        isValid = false;
        errorFields.push('Name');
      } else if (name.value.trim().length < 2) {
        showError(name, 'Name must be at least 2 characters long');
        isValid = false;
        errorFields.push('Name');
      }
      
      if (!email.value.trim()) {
        showError(email, 'Please fill in your email address');
        isValid = false;
        errorFields.push('Email');
      } else if (!isValidEmail(email.value)) {
        showError(email, 'Please enter a valid email address (e.g., example@email.com)');
        isValid = false;
        errorFields.push('Email');
      }
      
      if (!product.value) {
        showError(product, 'Please select a product you are interested in');
        isValid = false;
        errorFields.push('Product');
      }
      
      if (!message.value.trim()) {
        showError(message, 'Please fill in your enquiry message');
        isValid = false;
        errorFields.push('Message');
      } else if (message.value.trim().length < 10) {
        showError(message, 'Message must be at least 10 characters long');
        isValid = false;
        errorFields.push('Message');
      }
      
      if (!isValid) {
        showPopup('error', 'Form Incomplete', `Please check the following fields: ${errorFields.join(', ')}`);
        return false;
      }
      
      const submitBtn = this.querySelector('button[type="submit"]');
      submitBtn.classList.add('loading');
      submitBtn.disabled = true;
      
      setTimeout(() => {
        submitBtn.classList.remove('loading');
        submitBtn.disabled = false;
        
        const productName = product.options[product.selectedIndex].text;
        const now = new Date();
        const dateTime = now.toLocaleString('en-ZA', {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        });
        
        showPopup('success', 'Enquiry Submitted!', 
          `Thank you ${name.value.trim()} for your enquiry about ${productName}! Submitted on ${dateTime}. We have received your request and will contact you within 24 hours with pricing and availability information.`);
        
        this.reset();
        clearErrors('enquiry_form');
      }, 2000);
      
      return false;
    });
    
    // Update footer date and time
    function updateDateTime() {
      const now = new Date();
      const year = now.getFullYear();
      const options = { 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric', 
        hour: '2-digit', 
        minute: '2-digit' 
      };
      const formattedDate = now.toLocaleDateString('en-ZA', options);
      
      document.getElementById('footer-year').textContent = year;
      document.getElementById('last-updated').textContent = formattedDate;
    }
    
    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      updateCartCount();
      setupRealTimeValidation();
      updateDateTime();
    });
    </script>
</body>
</html>